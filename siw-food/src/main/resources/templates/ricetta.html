<!DOCTYPE html>

<html>

    <head>
        <meta charset="utf-8">
        <title>Scheda Ricetta</title>
    </head>

    <body>
        <a href="/ricette">Torna alla scheda delle ricette</a>
        
        <h1>Dettagli</h1>
        
        <div>
            <span th:if="${messaggioErrore}" th:text="${messaggioErrore}"></span>
        </div>

        <div>
            <a th:href="@{/admin/editRicetta/{id}(id=${ricetta.id})}">Modifica la scheda della ricetta</a>
        </div>
        <div>
            <a th:href="@{/admin/deleteRicetta/{ricetta_id}(ricetta_id=${ricetta.id})}">Cancella questa ricetta</a>
        </div>

        <div th:if="${ricetta.hasImages() == true}">
            <span th:each="immagine: ${ricetta.immagini}">
                <img
                    th:src="'data:image/jpeg;base64,' + ${immagine.getBase64()}" width="30%" />
            </span>
        </div>

        <div th:if="${ricetta}">
            <h2 th:text="${ricetta.nome}">Nome:</h2>
            <p th:text="${ricetta.descrizione}">Descrizione ricetta:</p>
        </div>

        <div>
            <h2>Ingredienti</h2>
            <h5>puoi aggiungere gli ingredienti nella scheda di modifica della ricetta (in alto)</h5>
            
            <ul>
                <li th:each="ingrediente : ${ricetta.ingredienti}">
                    <a th:href="@{/admin/ingredienti/{ingrediente_nome}(ingrediente_nome=${ingrediente.nome})}" th:text="${ingrediente.nome}"></a>
                    <span th:text="'(' + ${ingrediente.quantita} + ')'"></span>
                    <span>
                        <a th:href="@{/admin/rimuoviIngrediente/{ingrediente_id}(ingrediente_id = ${ingrediente.id})}">Rimuovi ingrediente</a>
                    </span>
                    
                    <div>
                        <h7>ALLERGENI:</h7>
                        <p th:if="${ingrediente.allergeni.isEmpty()}">Questo ingrediente non presenta allergeni</p>
                        <ul th:if="${!(ingrediente.allergeni.isEmpty())}">
                            <li th:each="allergene : ${ingrediente.allergeni}">
                                <span th:text="${allergene.nome}"></span>
                            </li>
                        </ul>
                    </div>
                    <br>
                </li>
            </ul>
        </div>

        <div>
            <span>Proposta da:</span>
            <span>
                <a th:href="@{/cuochi/{cuoco_id}(cuoco_id=${ricetta.cuoco.id})}" th:text="${ricetta.cuoco.nome} + ' ' + ${ricetta.cuoco.cognome}"></a>
            </span>
        </div>



        

    </body>




</html>